{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">

    <h3 class="mb-4 text-light">ðŸ“„ Job Applications</h3>

    {% for app in applications %}
    <div class="card mb-4 shadow application-card">
        <div class="card-body d-flex justify-content-between align-items-start flex-wrap">

            <!-- Left Info -->
            <div class="application-left">
                <h5 class="job-title">{{ app.job.title }}</h5>
                <p><strong>Applicant:</strong> {{ app.applicant.user.username }}</p>
                <p><strong>Name:</strong> {{ app.name }}</p>
                <p><strong>Degree:</strong> {{ app.degree }}</p>
                <p><strong>Passout Year:</strong> {{ app.passout_year }}</p>
                <p><strong>DOB:</strong> {{ app.dob }}</p>
                {% if app.resume_link %}
<p>
    <strong>Resume:</strong>
    <a href="{{ app.resume_link }}" target="_blank" class="text-info">
        View Resume
    </a>
</p>
{% else %}
<p><strong>Resume:</strong> Not provided</p>
{% endif %}

                <p><strong>Applied On:</strong> {{ app.applied_at|date:"d M Y, h:i A" }}</p>
                <hr style="border-color:#444;">
                <p><strong>Cover Letter:</strong></p>
                <p style="color:#ccc; font-size:0.95rem;">{{ app.cover_letter|linebreaks }}</p>
            </div>

            <!-- Right Status & Actions -->
            <div class="application-right d-flex flex-column align-items-end gap-2">
                <span class="status-badge status-{{ app.status }}">{{ app.get_status_display }}</span>

                <form method="POST" class="d-flex gap-2">
                    {% csrf_token %}
                    <input type="hidden" name="application_id" value="{{ app.id }}">
                    <button type="submit" name="action" value="accept" class="btn btn-success btn-sm">Accept</button>
                    <button type="submit" name="action" value="reject" class="btn btn-danger btn-sm">Reject</button>
                    <button type="submit" name="action" value="delete" class="btn btn-outline-light btn-sm" onclick="return confirm('Are you sure?');">Delete</button>
                </form>
            </div>

        </div>
    </div>
    {% empty %}
        <div class="alert alert-warning text-center" style="background-color:#2c2c3e; color:#fff; border:none;">
            No applications received yet.
        </div>
    {% endfor %}

</div>

<!-- Styles -->
<style>
.application-card {
    background: #1e1e2f;
    color: #fff;
    border-radius: 12px;
    transition: all 0.3s ease;
}
.application-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 30px rgba(0,0,0,0.6);
}

.job-title { 
    color:#ffdd57; 
    font-weight:600; 
}

/* Status Badges */
.status-badge {
    padding: 6px 14px;
    border-radius: 20px;
    font-weight: 500;
    font-size:0.85rem;
    color:#fff;
}
.status-pending { background:#6c757d; }
.status-accepted { background:#198754; }
.status-rejected { background:#dc3545; }

/* Layout */
.application-left { max-width:70%; }
.application-right { display:flex; flex-direction:column; align-items:flex-end; gap:5px; }

/* Buttons Hover */
button { transition: all 0.25s ease; }
button:hover { transform: translateY(-2px) scale(1.03); box-shadow:0 4px 12px rgba(0,0,0,0.4); }

</style>
{% endblock %}
